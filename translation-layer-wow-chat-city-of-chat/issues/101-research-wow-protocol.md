# 101 - Research WoW Protocol Structure

## Status
- Phase: 1
- Priority: High
- Dependencies: None

---

## Current Behavior

No documentation exists about WoW's client-server protocol within
this project. The translation layer cannot function without
understanding what data WoW clients send and receive.

---

## Intended Behavior

A comprehensive document (`docs/wow-protocol.md`) should exist that covers:

1. **Packet structure** - Header format, opcodes, payload encoding
2. **Authentication flow** - Login sequence, session management
3. **World data** - Zone transitions, entity spawning, movement
4. **Combat data** - Abilities, damage, buffs/debuffs
5. **Social data** - Chat, party, guild communications
6. **Character data** - Stats, inventory, talents

The document should identify which data types are essential for
cross-game translation and which can be ignored or approximated.

---

## Suggested Implementation Steps

1. Research existing WoW protocol documentation:
   - WoWDev wiki and archives
   - Private server implementations (TrinityCore, AzerothCore)
   - Packet sniffing tools and their documentation

2. Focus on protocol versions that are most accessible:
   - Classic/Vanilla may have best documentation
   - Consider which expansion aligns with desired gameplay

3. Document packet format with examples:
   - Include hex dumps of sample packets
   - Annotate each field with meaning and data type

4. Create opcode reference table:
   - Map opcode numbers to human-readable names
   - Note which opcodes are bidirectional

5. Identify translation-critical data:
   - Mark fields that MUST be translated for gameplay
   - Mark fields that can be approximated or ignored

---

## Resources

- TrinityCore: https://github.com/TrinityCore/TrinityCore
- WoWDev wiki (archived)
- Mangos project documentation
- Packet analysis tools (WPE Pro, etc.)

---

## Notes

WoW's protocol is proprietary and protected. This research is for
educational and interoperability purposes. The translation layer
does not seek to bypass authentication or enable unauthorized access.

---

## Initial Analysis

*Generated by Claude Code on 2025-12-21 00:20*

This issue covers a substantial research domain with six distinct protocol areas. Each area requires different research approaches and produces different documentation outputs. Splitting would allow parallel research and clearer progress tracking.

**Recommendation: Split into 6 sub-issues**

The intended behavior section explicitly identifies six separate protocol domains, each with its own data structures and documentation requirements:

| ID | Name | Description |
|----|------|-------------|
| 101a | research-packet-structure | Document header format, opcode encoding, and payload structure with hex examples |
| 101b | research-auth-flow | Map the login sequence, session tokens, and handshake protocol |
| 101c | research-world-data | Document zone transitions, entity spawning/despawning, and movement packets |
| 101d | research-combat-data | Map ability usage, damage events, and buff/debuff application packets |
| 101e | research-social-data | Document chat channels, party/guild messages, and whisper protocol |
| 101f | research-character-data | Map stats, inventory updates, and talent/spec data structures |

Each sub-issue should produce a section of `docs/wow-protocol.md` and include:
- Opcode reference for that domain
- Sample packet hex dumps
- Translation-critical field markers

The parent issue 101 would remain as a coordination point, marked complete only when all sub-issues merge into the final document.

---

## Initial Analysis

*Generated by Claude Code on 2025-12-21 00:32*

Looking at this issue file, I can see it's already been analyzed and has a sub-issue split recommendation at the bottom. Let me review whether that recommendation is appropriate.

## Analysis

The issue covers **six distinct protocol domains** as explicitly listed in the "Intended Behavior" section:

1. Packet structure
2. Authentication flow
3. World data
4. Combat data
5. Social data
6. Character data

Each of these:
- Requires different research sources (authentication docs vs combat opcode tables)
- Produces independent documentation sections
- Can be worked on in parallel
- Has clear completion criteria (documented with hex examples and translation markers)

The existing recommendation at the bottom of the file is well-structured and follows your naming conventions correctly.

## Recommendation: Accept the existing split

The sub-issue table already present is appropriate:

| ID | Name | Description |
|----|------|-------------|
| 101a | research-packet-structure | Document header format, opcode encoding, and payload structure with hex examples |
| 101b | research-auth-flow | Map the login sequence, session tokens, and handshake protocol |
| 101c | research-world-data | Document zone transitions, entity spawning/despawning, and movement packets |
| 101d | research-combat-data | Map ability usage, damage events, and buff/debuff application packets |
| 101e | research-social-data | Document chat channels, party/guild messages, and whisper protocol |
| 101f | research-character-data | Map stats, inventory updates, and talent/spec data structures |

**Why this split works:**

- **101a** must come first - understanding packet structure is prerequisite for all others
- **101b-101f** can proceed in parallel once 101a establishes the framing
- Each produces a distinct section of `docs/wow-protocol.md`
- Dependencies are minimal between 101b-101f (though combat/character have some overlap)

**Potential refinement:** You might consider making 101a a hard dependency for the others, since understanding the base packet structure (header size, endianness, opcode width) is necessary before parsing domain-specific payloads.

---

## Initial Analysis

*Generated by Claude Code on 2025-12-21 00:38*

Looking at this issue, I can see it's already been analyzed twice with sub-issue recommendations. Let me provide my assessment.

## Analysis

The issue is well-suited for splitting. The "Intended Behavior" section explicitly identifies **six distinct protocol domains**, each requiring:
- Different research sources and approaches
- Independent documentation outputs
- Separate opcode tables and hex examples

## Recommendation: Split into 6 sub-issues

The existing analysis is sound. Here's the recommended split:

| ID | Name | Description |
|----|------|-------------|
| 101a | research-packet-structure | Document header format, opcode encoding, and payload structure with hex examples |
| 101b | research-auth-flow | Map the login sequence, session tokens, and handshake protocol |
| 101c | research-world-data | Document zone transitions, entity spawning/despawning, and movement packets |
| 101d | research-combat-data | Map ability usage, damage events, and buff/debuff application packets |
| 101e | research-social-data | Document chat channels, party/guild messages, and whisper protocol |
| 101f | research-character-data | Map stats, inventory updates, and talent/spec data structures |

**Dependency note:** 101a should be completed first since understanding packet framing (header size, endianness, opcode width) is prerequisite for parsing domain-specific payloads in 101b-101f. The remaining five can then proceed in parallel.

**One question for you:** The existing file already contains two "Sub-Issue Analysis" sections with this same recommendation. Should I create the actual sub-issue files, or was this analysis run previously and you're looking to proceed differently this time?

---

## Generated Sub-Issues

*Auto-generated on 2025-12-21 00:47*

- 101a-research-packet-structure.md
- 101b-research-auth-flow.md
- 101c-research-world-data.md
- 101d-research-combat-data.md
- 101e-research-social-data.md
- 101f-research-character-data.md
